import{r as n,A as y,u as j,p as b,j as e,q as P,t as N,v,c as k,w as T}from"./index-2hdSntFx.js";import{u as C,S,k as E,Q as f}from"./Spinner-pPthO7sM.js";class A extends Error{}A.prototype.name="InvalidTokenError";const O=()=>{const[o,c]=n.useState(!1),[s,l]=n.useState({email:"",password:""}),{loading:m,setLoading:i}=n.useContext(y),u=j(),d=C(),x=()=>{f.success("Loggged in Successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",onClose:t=>{var r;u((r=k)==null?void 0:r.CHATS)}})},p=async()=>{i(!0),s!=null&&s.email&&(s!=null&&s.password)&&d(P(s,x,i))},g=()=>{l({email:"guest@example.com",password:"123456"})},a=b({onSuccess:async t=>{N.get(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${t==null?void 0:t.access_token}`).then(async r=>{const{name:h,email:w,picture:L}=r==null?void 0:r.data;await d(v({name:h,email:w,pic:L},x,i))}).catch(r=>console.log(r))},onError:t=>console.log("Login Failed:",t)});return e.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[e.jsxs("p",{className:"text-gray-900",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{value:s==null?void 0:s.email,onChange:t=>l({...s,email:t.target.value}),placeholder:"Enter Email Address",type:"email",className:"border p-2 rounded focus:outline-sky-500 text-gray-600 text-sm"}),e.jsxs("p",{className:"text-gray-900",children:["Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative flex flex-row justify-between gap-3",children:[e.jsx("input",{value:s==null?void 0:s.password,onChange:t=>l({...s,password:t.target.value}),placeholder:"Enter Password",type:o?"text":"password",className:"flex-grow border p-2 rounded focus:outline-sky-500 text-gray-600 text-sm"}),e.jsx("i",{className:`${o?"fa-solid fa-eye":"fa-solid fa-eye-slash"} my-auto hover:cursor-pointer text-lg`,onClick:()=>c(!o)})]}),e.jsxs("button",{className:"bg-sky-500 rounded p-2 text-white text-sm subpixel-antialiased flex justify-center align-middle gap-2",onClick:p,children:[m&&e.jsx(S,{}),"  Login"]}),e.jsx("button",{className:"bg-red-400 rounded p-2 text-white text-sm subpixel-antialiased",onClick:g,children:"Get Guest User Credential"}),e.jsxs("div",{className:"flex items-center my-3",children:[e.jsx("div",{className:"flex-1 border-t border-gray-300"}),e.jsx("span",{className:"mx-4 text-gray-500",children:"OR"}),e.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),e.jsxs("button",{onClick:()=>a(),className:"bg-blue-500 rounded-md py-1 w-full px-2 self-center justify-center flex gap-2 items-center shadow-md shadow-blue-300 shadow-inner border-blue-400 border",children:[e.jsx("img",{src:"/google.png",alt:"image",className:"rounded-md w-8 h-8 object-cover"}),e.jsx("p",{className:"text-white text-sm subpixel-antialiased",children:"SignIn With Google"})]}),e.jsx(E,{})]})},$=n.memo(O),H=()=>{const[o,c]=n.useState(!1),[s,l]=n.useState({name:"",email:"",password:"",confirmpassword:"",pic:{}}),{loading:m,setLoading:i}=n.useContext(y),u=j(),d=C(),x=()=>{f.success("Registered Successfully!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",onClose:a=>{var t;u((t=k)==null?void 0:t.CHATS)}})},p=async()=>{if(i(!0),(s==null?void 0:s.password)!=(s==null?void 0:s.confirmpassword))f.error("password and confirm password should be same!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),i(!1);else if(s){let a=new FormData;a.append("name",s==null?void 0:s.name),a.append("email",s==null?void 0:s.email),a.append("password",s==null?void 0:s.password),a.append("pic",s==null?void 0:s.pic),d(T(a,x,i))}},g=b({onSuccess:async a=>{N.get(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${a==null?void 0:a.access_token}`).then(async t=>{const{name:r,email:h,picture:w}=t==null?void 0:t.data;await d(v({name:r,email:h,pic:w,token:a==null?void 0:a.access_token},x,i))}).catch(t=>console.log(t))},onError:a=>console.log("Login Failed:",a)});return e.jsxs("div",{className:"flex flex-col gap-3 w-full mt-6",children:[e.jsxs("p",{className:"text-gray-900",children:["Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{value:s==null?void 0:s.name,onChange:a=>l({...s,name:a.target.value}),placeholder:"Enter Name",type:"text",className:"border p-2 rounded focus:outline-sky-500 text-gray-600 text-sm"}),e.jsxs("p",{className:"text-gray-900",children:["Email Address ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{value:s==null?void 0:s.email,onChange:a=>l({...s,email:a.target.value}),placeholder:"Enter Email Address",type:"email",className:"border p-2 rounded focus:outline-sky-500 text-gray-600 text-sm"}),e.jsxs("p",{className:"text-gray-900",children:["Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative flex flex-row justify-between gap-3",children:[e.jsx("input",{value:s==null?void 0:s.password,onChange:a=>l({...s,password:a.target.value}),placeholder:"Enter Password",type:o?"text":"password",className:"flex-grow border p-2 rounded focus:outline-sky-500 text-gray-600 text-sm"}),e.jsx("i",{className:`${o?"fa-solid fa-eye":"fa-solid fa-eye-slash"} my-auto hover:cursor-pointer text-lg`,onClick:()=>c(!o)})]}),e.jsxs("p",{className:"text-gray-900",children:["Confirm Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsxs("div",{className:"relative flex flex-row justify-between gap-3",children:[e.jsx("input",{value:s==null?void 0:s.confirmpassword,onChange:a=>l({...s,confirmpassword:a.target.value}),placeholder:"Confirm Password",type:o?"text":"password",className:"flex-grow border p-2 rounded focus:outline-sky-500 text-gray-600 text-sm"}),e.jsx("i",{className:`${o?"fa-solid fa-eye":"fa-solid fa-eye-slash"} my-auto hover:cursor-pointer text-lg`,onClick:()=>c(!o)})]}),e.jsxs("p",{className:"text-gray-900",children:["Upload Profile Picture ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{onChange:a=>l({...s,pic:a.target.files[0]}),type:"file",className:`border p-2 rounded focus:outline-sky-500 text-gray-600 text-sm file:mr-4 file:py-1 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-sky-50 file:text-sky-700
                    hover:file:bg-sky-100`}),e.jsxs("button",{className:"bg-sky-500 rounded p-2 text-white text-sm subpixel-antialiased flex justify-center items-center",onClick:p,children:[m&&e.jsx(S,{}),"Sign Up"]}),e.jsxs("div",{className:"flex items-center my-3",children:[e.jsx("div",{className:"flex-1 border-t border-gray-300"}),e.jsx("span",{className:"mx-4 text-gray-500",children:"OR"}),e.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),e.jsxs("button",{onClick:()=>g(),className:"bg-blue-500 rounded-md py-1 w-full px-2 self-center justify-center flex gap-2 items-center shadow-md shadow-blue-300 shadow-inner border-blue-400 border",children:[e.jsx("img",{src:"/google.png",alt:"image",className:"rounded-md w-8 h-8 object-cover"}),e.jsx("p",{className:"text-white text-sm subpixel-antialiased",children:"SignIn With Google"})]}),e.jsx(E,{})]})},F=n.memo(H),_=()=>{const[o,c]=n.useState(1);return e.jsxs("div",{className:"container justify-center w-screen mx-auto",children:[e.jsx("div",{className:"max-w-lg mx-auto bg-white shadow-2xl rounded-lg py-4 px-3 justify-center mt-7 mb-3",children:e.jsx("p",{className:"text-center font-mono text-2xl",children:"Talk-A-Tive"})}),e.jsxs("div",{className:"max-w-lg mx-auto bg-white shadow-2xl rounded-lg justify-center p-5",children:[e.jsxs("div",{className:"flex justify-between align-middle w-full gap-2",children:[e.jsx("button",{className:`w-1/2 ${o==1?"bg-sky-100":""} p-2 rounded-full font-sans tracking-widest shadow-inner`,onClick:()=>c(1),children:"Login"}),e.jsx("button",{className:`w-1/2 ${o==2?"bg-sky-100":""} p-2 rounded-full font-sans tracking-widest shadow-inner`,onClick:()=>c(2),children:"Sign Up"})]}),o==1?e.jsx($,{}):e.jsx(F,{})]})]})};export{_ as default};
